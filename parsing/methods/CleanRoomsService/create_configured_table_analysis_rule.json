{
  "method_name": "create_configured_table_analysis_rule",
  "url": "https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/cleanrooms/client/create_configured_table_analysis_rule.html",
  "description": "Creates a new analysis rule for a configured table. Currently, only one analysis rule can be created for a given configured table.",
  "parameters": [
    {
      "name": "configuredTableIdentifier",
      "type": "string",
      "required": true,
      "description": "The identifier for the configured table to create the analysis rule for. Currently accepts the configured table ID.",
      "nested_params": []
    },
    {
      "name": "analysisRuleType",
      "type": "string",
      "required": true,
      "description": "The type of analysis rule.",
      "nested_params": []
    },
    {
      "name": "analysisRulePolicy",
      "type": "dict",
      "required": true,
      "description": "The analysis rule policy that was created for the configured table. v1 (dict) --- Controls on the query specifications that can be run on a configured table. list (dict) --- Analysis rule type that enables only list queries on a configured table. Columns that can be used to join a configured table with the table of the member who can query and other members' configured tables. (string) --- allowedJoinOperators (list) --- The logical operators (if any) that are to be used in an INNER JOIN match condition. Default is AND. (string) --- Columns that can be listed in the output. (string) --- additionalAnalyses (string) --- An indicator as to whether additional analyses (such as Clean Rooms ML) can be applied to the output of the direct query. aggregation (dict) --- Analysis rule type that enables only aggregation queries on a configured table. The columns that query runners are allowed to use in aggregation queries. (dict) --- Column in configured table that can be used in aggregate function in query. Column names in configured table of aggregate columns. (string) --- Aggregation function that can be applied to aggregate column in query. Columns in configured table that can be used in join statements and/or as aggregate columns. They can never be outputted directly. (string) --- joinRequired (string) --- Control that requires member who runs query to do a join with their configured table and/or other configured table in query. allowedJoinOperators (list) --- Which logical operators (if any) are to be used in an INNER JOIN match condition. (string) --- The columns that query runners are allowed to select, group by, or filter by. (string) --- Set of scalar functions that are allowed to be used on dimension columns and the output of aggregation of metrics. (string) --- Columns that must meet a specific threshold value (after an aggregation function is applied to it) for each output row to be returned. (dict) --- Constraint on query output removing output rows that do not meet a minimum number of distinct values of a specified column. Column in aggregation constraint for which there must be a minimum number of distinct values in an output row for it to be in the query output. The minimum number of distinct values that an output row must be an aggregation of. Minimum threshold of distinct values for a specified column that must exist in an output row for it to be in the query output. The type of aggregation the constraint allows. The only valid value is currently COUNT_DISTINCT. additionalAnalyses (string) --- An indicator as to whether additional analyses (such as Clean Rooms ML) can be applied to the output of the direct query. The additionalAnalyses parameter is currently supported for the list analysis rule ( AnalysisRuleList) and the custom analysis rule ( AnalysisRuleCustom). custom (dict) --- A type of analysis rule that enables the table owner to approve custom SQL queries on their configured tables. It supports differential privacy. The ARN of the analysis templates that are allowed by the custom analysis rule. (string) --- allowedAnalysisProviders (list) --- The IDs of the Amazon Web Services accounts that are allowed to query by the custom analysis rule. Required when allowedAnalyses is ANY_QUERY. disallowedOutputColumns (list) --- A list of columns that aren't allowed to be shown in the query output. (string) --- differentialPrivacy (dict) --- The differential privacy configuration. The name of the column (such as user_id) that contains the unique identifier of your users whose privacy you want to protect. If you want to turn on di\u00ef\u00ac-erential privacy for two or more tables in a collaboration, you must con\u00ef\u00ac\u0081gure the same column as the user identi\u00ef\u00ac\u0081er column in both analysis rules. (dict) --- Specifies the name of the column that contains the unique identifier of your users, whose privacy you want to protect. The name of the column, such as user_id, that contains the unique identifier of your users, whose privacy you want to protect. If you want to turn on differential privacy for two or more tables in a collaboration, you must configure the same column as the user identifier column in both analysis rules.",
      "nested_params": [
        {
          "name": "v1",
          "type": "dict",
          "required": false,
          "description": "Controls on the query specifications that can be run on a configured table.",
          "nested_params": [
            {
              "name": "list",
              "type": "dict",
              "required": false,
              "description": "Analysis rule type that enables only list queries on a configured table.",
              "nested_params": [
                {
                  "name": "joinColumns",
                  "type": "list",
                  "required": false,
                  "description": "Columns that can be used to join a configured table with the table of the member who can query and other members' configured tables.",
                  "nested_params": []
                },
                {
                  "name": "allowedJoinOperators",
                  "type": "list",
                  "required": false,
                  "description": "The logical operators (if any) that are to be used in an INNER JOIN match condition. Default is AND.",
                  "nested_params": []
                },
                {
                  "name": "listColumns",
                  "type": "list",
                  "required": false,
                  "description": "Columns that can be listed in the output.",
                  "nested_params": []
                },
                {
                  "name": "additionalAnalyses",
                  "type": "string",
                  "required": false,
                  "description": "An indicator as to whether additional analyses (such as Clean Rooms ML) can be applied to the output of the direct query.",
                  "nested_params": []
                }
              ]
            },
            {
              "name": "aggregation",
              "type": "dict",
              "required": false,
              "description": "Analysis rule type that enables only aggregation queries on a configured table.",
              "nested_params": [
                {
                  "name": "aggregateColumns",
                  "type": "list",
                  "required": false,
                  "description": "The columns that query runners are allowed to use in aggregation queries.",
                  "nested_params": [
                    {
                      "name": "columnNames",
                      "type": "list",
                      "required": false,
                      "description": "Column names in configured table of aggregate columns.",
                      "nested_params": []
                    },
                    {
                      "name": "function",
                      "type": "string",
                      "required": false,
                      "description": "Aggregation function that can be applied to aggregate column in query.",
                      "nested_params": []
                    }
                  ]
                },
                {
                  "name": "joinColumns",
                  "type": "list",
                  "required": false,
                  "description": "Columns in configured table that can be used in join statements and/or as aggregate columns. They can never be outputted directly.",
                  "nested_params": []
                },
                {
                  "name": "joinRequired",
                  "type": "string",
                  "required": false,
                  "description": "Control that requires member who runs query to do a join with their configured table and/or other configured table in query.",
                  "nested_params": []
                },
                {
                  "name": "allowedJoinOperators",
                  "type": "list",
                  "required": false,
                  "description": "Which logical operators (if any) are to be used in an INNER JOIN match condition. Default is AND.",
                  "nested_params": []
                },
                {
                  "name": "dimensionColumns",
                  "type": "list",
                  "required": false,
                  "description": "The columns that query runners are allowed to select, group by, or filter by.",
                  "nested_params": []
                },
                {
                  "name": "scalarFunctions",
                  "type": "list",
                  "required": false,
                  "description": "Set of scalar functions that are allowed to be used on dimension columns and the output of aggregation of metrics.",
                  "nested_params": []
                },
                {
                  "name": "outputConstraints",
                  "type": "list",
                  "required": false,
                  "description": "Columns that must meet a specific threshold value (after an aggregation function is applied to it) for each output row to be returned.",
                  "nested_params": [
                    {
                      "name": "columnName",
                      "type": "string",
                      "required": false,
                      "description": "Column in aggregation constraint for which there must be a minimum number of distinct values in an output row for it to be in the query output.",
                      "nested_params": []
                    },
                    {
                      "name": "minimum",
                      "type": "integer",
                      "required": false,
                      "description": "The minimum number of distinct values that an output row must be an aggregation of. Minimum threshold of distinct values for a specified column that must exist in an output row for it to be in the query output.",
                      "nested_params": []
                    },
                    {
                      "name": "type",
                      "type": "string",
                      "required": false,
                      "description": "The type of aggregation the constraint allows. The only valid value is currently COUNT_DISTINCT.",
                      "nested_params": []
                    }
                  ]
                },
                {
                  "name": "additionalAnalyses",
                  "type": "string",
                  "required": false,
                  "description": "An indicator as to whether additional analyses (such as Clean Rooms ML) can be applied to the output of the direct query. The additionalAnalyses parameter is currently supported for the list analysis rule ( AnalysisRuleList) and the custom analysis rule ( AnalysisRuleCustom).",
                  "nested_params": []
                }
              ]
            },
            {
              "name": "custom",
              "type": "dict",
              "required": false,
              "description": "A type of analysis rule that enables the table owner to approve custom SQL queries on their configured tables. It supports differential privacy.",
              "nested_params": [
                {
                  "name": "allowedAnalyses",
                  "type": "list",
                  "required": false,
                  "description": "The ARN of the analysis templates that are allowed by the custom analysis rule.",
                  "nested_params": []
                },
                {
                  "name": "allowedAnalysisProviders",
                  "type": "list",
                  "required": false,
                  "description": "The IDs of the Amazon Web Services accounts that are allowed to query by the custom analysis rule. Required when allowedAnalyses is ANY_QUERY.",
                  "nested_params": []
                },
                {
                  "name": "additionalAnalyses",
                  "type": "string",
                  "required": false,
                  "description": "An indicator as to whether additional analyses (such as Clean Rooms ML) can be applied to the output of the direct query.",
                  "nested_params": []
                },
                {
                  "name": "disallowedOutputColumns",
                  "type": "list",
                  "required": false,
                  "description": "A list of columns that aren't allowed to be shown in the query output.",
                  "nested_params": []
                },
                {
                  "name": "differentialPrivacy",
                  "type": "dict",
                  "required": false,
                  "description": "The differential privacy configuration.",
                  "nested_params": [
                    {
                      "name": "columns",
                      "type": "list",
                      "required": false,
                      "description": "The name of the column (such as user_id) that contains the unique identifier of your users whose privacy you want to protect. If you want to turn on di\u00ef\u00ac-erential privacy for two or more tables in a collaboration, you must con\u00ef\u00ac\u0081gure the same column as the user identi\u00ef\u00ac\u0081er column in both analysis rules.",
                      "nested_params": [
                        {
                          "name": "name",
                          "type": "string",
                          "required": false,
                          "description": "The name of the column, such as user_id, that contains the unique identifier of your users, whose privacy you want to protect. If you want to turn on differential privacy for two or more tables in a collaboration, you must configure the same column as the user identifier column in both analysis rules.",
                          "nested_params": []
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "return_structure": [
    {
      "name": "",
      "type": "dict",
      "description": "",
      "nested_items": [
        {
          "name": "analysisRule",
          "type": "dict",
          "description": "The analysis rule that was created for the configured table.",
          "nested_items": [
            {
              "name": "configuredTableId",
              "type": "string",
              "description": "The unique ID for the configured table.",
              "nested_items": []
            },
            {
              "name": "configuredTableArn",
              "type": "string",
              "description": "The unique ARN for the configured table.",
              "nested_items": []
            },
            {
              "name": "",
              "type": "dict",
              "description": "",
              "nested_items": [
                {
                  "name": "",
                  "type": "dict",
                  "description": "",
                  "nested_items": [
                    {
                      "name": "",
                      "type": "dict",
                      "description": "",
                      "nested_items": [
                        {
                          "name": "joinColumns",
                          "type": "list",
                          "description": "Columns that can be used to join a configured table with the table of the member who can query and other members' configured tables.",
                          "nested_items": [
                            {
                              "name": "",
                              "type": "string",
                              "description": "(string) ---",
                              "nested_items": []
                            }
                          ]
                        },
                        {
                          "name": "allowedJoinOperators",
                          "type": "list",
                          "description": "The logical operators (if any) that are to be used in an INNER JOIN match condition. Default is AND.",
                          "nested_items": [
                            {
                              "name": "",
                              "type": "string",
                              "description": "(string) ---",
                              "nested_items": []
                            }
                          ]
                        },
                        {
                          "name": "listColumns",
                          "type": "list",
                          "description": "Columns that can be listed in the output.",
                          "nested_items": [
                            {
                              "name": "",
                              "type": "string",
                              "description": "(string) ---",
                              "nested_items": []
                            }
                          ]
                        },
                        {
                          "name": "additionalAnalyses",
                          "type": "string",
                          "description": "An indicator as to whether additional analyses (such as Clean Rooms ML) can be applied to the output of the direct query.",
                          "nested_items": []
                        }
                      ]
                    },
                    {
                      "name": "aggregation",
                      "type": "dict",
                      "description": "Analysis rule type that enables only aggregation queries on a configured table.",
                      "nested_items": [
                        {
                          "name": "aggregateColumns",
                          "type": "list",
                          "description": "The columns that query runners are allowed to use in aggregation queries.",
                          "nested_items": [
                            {
                              "name": "",
                              "type": "dict",
                              "description": "",
                              "nested_items": [
                                {
                                  "name": "columnNames",
                                  "type": "list",
                                  "description": "Column names in configured table of aggregate columns.",
                                  "nested_items": [
                                    {
                                      "name": "",
                                      "type": "string",
                                      "description": "(string) ---",
                                      "nested_items": []
                                    }
                                  ]
                                },
                                {
                                  "name": "function",
                                  "type": "string",
                                  "description": "Aggregation function that can be applied to aggregate column in query.",
                                  "nested_items": []
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "name": "joinColumns",
                          "type": "list",
                          "description": "Columns in configured table that can be used in join statements and/or as aggregate columns. They can never be outputted directly.",
                          "nested_items": [
                            {
                              "name": "",
                              "type": "string",
                              "description": "(string) ---",
                              "nested_items": []
                            }
                          ]
                        },
                        {
                          "name": "joinRequired",
                          "type": "string",
                          "description": "Control that requires member who runs query to do a join with their configured table and/or other configured table in query.",
                          "nested_items": []
                        },
                        {
                          "name": "allowedJoinOperators",
                          "type": "list",
                          "description": "Which logical operators (if any) are to be used in an INNER JOIN match condition. Default is AND.",
                          "nested_items": [
                            {
                              "name": "",
                              "type": "string",
                              "description": "(string) ---",
                              "nested_items": []
                            }
                          ]
                        },
                        {
                          "name": "dimensionColumns",
                          "type": "list",
                          "description": "The columns that query runners are allowed to select, group by, or filter by.",
                          "nested_items": [
                            {
                              "name": "",
                              "type": "string",
                              "description": "(string) ---",
                              "nested_items": []
                            }
                          ]
                        },
                        {
                          "name": "scalarFunctions",
                          "type": "list",
                          "description": "Set of scalar functions that are allowed to be used on dimension columns and the output of aggregation of metrics.",
                          "nested_items": [
                            {
                              "name": "",
                              "type": "string",
                              "description": "(string) ---",
                              "nested_items": []
                            }
                          ]
                        },
                        {
                          "name": "outputConstraints",
                          "type": "list",
                          "description": "Columns that must meet a specific threshold value (after an aggregation function is applied to it) for each output row to be returned.",
                          "nested_items": [
                            {
                              "name": "",
                              "type": "dict",
                              "description": "",
                              "nested_items": [
                                {
                                  "name": "columnName",
                                  "type": "string",
                                  "description": "Column in aggregation constraint for which there must be a minimum number of distinct values in an output row for it to be in the query output.",
                                  "nested_items": []
                                },
                                {
                                  "name": "minimum",
                                  "type": "integer",
                                  "description": "The minimum number of distinct values that an output row must be an aggregation of. Minimum threshold of distinct values for a specified column that must exist in an output row for it to be in the query output.",
                                  "nested_items": []
                                },
                                {
                                  "name": "type",
                                  "type": "string",
                                  "description": "The type of aggregation the constraint allows. The only valid value is currently COUNT_DISTINCT.",
                                  "nested_items": []
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "name": "additionalAnalyses",
                          "type": "string",
                          "description": "An indicator as to whether additional analyses (such as Clean Rooms ML) can be applied to the output of the direct query.",
                          "nested_items": []
                        }
                      ]
                    },
                    {
                      "name": "",
                      "type": "dict",
                      "description": "",
                      "nested_items": [
                        {
                          "name": "allowedAnalyses",
                          "type": "list",
                          "description": "The ARN of the analysis templates that are allowed by the custom analysis rule.",
                          "nested_items": [
                            {
                              "name": "",
                              "type": "string",
                              "description": "(string) ---",
                              "nested_items": []
                            }
                          ]
                        },
                        {
                          "name": "allowedAnalysisProviders",
                          "type": "list",
                          "description": "The IDs of the Amazon Web Services accounts that are allowed to query by the custom analysis rule. Required when allowedAnalyses is ANY_QUERY.",
                          "nested_items": [
                            {
                              "name": "",
                              "type": "string",
                              "description": "(string) ---",
                              "nested_items": []
                            }
                          ]
                        },
                        {
                          "name": "additionalAnalyses",
                          "type": "string",
                          "description": "An indicator as to whether additional analyses (such as Clean Rooms ML) can be applied to the output of the direct query.",
                          "nested_items": []
                        },
                        {
                          "name": "disallowedOutputColumns",
                          "type": "list",
                          "description": "A list of columns that aren't allowed to be shown in the query output.",
                          "nested_items": [
                            {
                              "name": "",
                              "type": "string",
                              "description": "(string) ---",
                              "nested_items": []
                            }
                          ]
                        },
                        {
                          "name": "differentialPrivacy",
                          "type": "dict",
                          "description": "The differential privacy configuration.",
                          "nested_items": [
                            {
                              "name": "columns",
                              "type": "list",
                              "description": "The name of the column (such as user_id) that contains the unique identifier of your users whose privacy you want to protect. If you want to turn on di\u00ef\u00ac-erential privacy for two or more tables in a collaboration, you must con\u00ef\u00ac\u0081gure the same column as the user identi\u00ef\u00ac\u0081er column in both analysis rules.",
                              "nested_items": [
                                {
                                  "name": "",
                                  "type": "dict",
                                  "description": "",
                                  "nested_items": [
                                    {
                                      "name": "name",
                                      "type": "string",
                                      "description": "The name of the column, such as user_id, that contains the unique identifier of your users, whose privacy you want to protect. If you want to turn on differential privacy for two or more tables in a collaboration, you must configure the same column as the user identifier column in both analysis rules.",
                                      "nested_items": []
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "name": "type",
              "type": "string",
              "description": "The type of configured table analysis rule.",
              "nested_items": []
            },
            {
              "name": "createTime",
              "type": "datetime",
              "description": "The time the configured table analysis rule was created.",
              "nested_items": []
            },
            {
              "name": "updateTime",
              "type": "datetime",
              "description": "The time the configured table analysis rule was last updated.",
              "nested_items": []
            }
          ]
        }
      ]
    }
  ]
}