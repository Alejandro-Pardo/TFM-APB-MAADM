{
  "method_name": "start_chat_contact",
  "url": "https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/connect/client/start_chat_contact.html",
  "description": "Initiates a flow to start a new chat for the customer. Response of this API provides a token required to obtain credentials from the CreateParticipantConnection API in the Amazon Connect Participant Service. When a new chat contact is successfully created, clients must subscribe to the participant's connection for the created chat within 5 minutes. This is achieved by invoking CreateParticipantConnection with WEBSOCKET and CONNECTION_CREDENTIALS. A 429 error occurs in the following situations: If you use the ChatDurationInMinutes parameter and receive a 400 error, your account may not support the ability to configure custom chat durations. For more information, contact Amazon Web ServicesSupport. For more information about chat, see the following topics in the Amazon Connect Administrator Guide:",
  "parameters": [
    {
      "name": "InstanceId",
      "type": "string",
      "required": true,
      "description": "The identifier of the Amazon Connect instance. You can find the instance ID in the Amazon Resource Name (ARN) of the instance.",
      "nested_params": []
    },
    {
      "name": "ContactFlowId",
      "type": "string",
      "required": true,
      "description": "The identifier of the flow for initiating the chat. To see the ContactFlowId in the Amazon Connect admin website, on the navigation menu go to Routing, Flows. Choose the flow. On the flow page, under the name of the flow, choose Show additional flow information. The ContactFlowId is the last part of the ARN, shown here in bold: arn:aws:connect:us-west-2:xxxxxxxxxxxx:instance/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/contact-flow/846ec553-a005-41c0-8341-xxxxxxxxxxxx.",
      "nested_params": []
    },
    {
      "name": "Attributes",
      "type": "dict",
      "required": false,
      "description": "A custom key-value pair using an attribute map. The attributes are standard Amazon Connect attributes. They can be accessed in flows just like any other contact attributes. There can be up to 32,768 UTF-8 bytes across all key-value pairs per contact. Attribute keys can include only alphanumeric, dash, and underscore characters. (string) --- (string) ---",
      "nested_params": []
    },
    {
      "name": "ParticipantDetails",
      "type": "dict",
      "required": true,
      "description": "Information identifying the participant. Display name of the participant.",
      "nested_params": [
        {
          "name": "DisplayName",
          "type": "string",
          "required": false,
          "description": "Display name of the participant.",
          "nested_params": []
        }
      ]
    },
    {
      "name": "InitialMessage",
      "type": "dict",
      "required": true,
      "description": "The initial message to be sent to the newly created chat. If you have a Lex bot in your flow, the initial message is not delivered to the Lex bot. The type of the content. Supported types are text/plain, text/markdown, application/json, and application/vnd.amazonaws.connect.message.interactive.response. The content of the chat message. For text/plain and text/markdown, the Length Constraints are Minimum of 1, Maximum of 1024. For application/json, the Length Constraints are Minimum of 1, Maximum of 12000. For application/vnd.amazonaws.connect.message.interactive.response, the Length Constraints are Minimum of 1, Maximum of 12288.",
      "nested_params": [
        {
          "name": "ContentType",
          "type": "string",
          "required": false,
          "description": "The type of the content. Supported types are text/plain, text/markdown, application/json, and application/vnd.amazonaws.connect.message.interactive.response.",
          "nested_params": []
        },
        {
          "name": "Content",
          "type": "string",
          "required": false,
          "description": "The content of the chat message.",
          "nested_params": []
        }
      ]
    },
    {
      "name": "ClientToken",
      "type": "string",
      "required": false,
      "description": "A unique, case-sensitive identifier that you provide to ensure the idempotency of the request. If not provided, the Amazon Web Services SDK populates this field. For more information about idempotency, see Making retries safe with idempotent APIs. This field is autopopulated if not provided.",
      "nested_params": []
    },
    {
      "name": "ChatDurationInMinutes",
      "type": "integer",
      "required": false,
      "description": "",
      "nested_params": []
    },
    {
      "name": "SupportedMessagingContentTypes",
      "type": "list",
      "required": false,
      "description": "The supported chat message content types. Supported types are text/plain, text/markdown, application/json, application/vnd.amazonaws.connect.message.interactive, and application/vnd.amazonaws.connect.message.interactive.response. Content types must always contain text/plain. You can then put any other supported type in the list. For example, all the following lists are valid because they contain text/plain: [text/plain, text/markdown, application/json], [text/markdown, text/plain], [text/plain, application/json, application/vnd.amazonaws.connect.message.interactive.response]. (string) ---",
      "nested_params": []
    },
    {
      "name": "PersistentChat",
      "type": "dict",
      "required": false,
      "description": "Enable persistent chats. For more information about enabling persistent chat, and for example use cases and how to configure for them, see Enable persistent chat. RehydrationType (string) --- The contactId that is used for rehydration depends on the rehydration type. RehydrationType is required for persistent chat. ENTIRE_PAST_SESSION: Rehydrates a chat from the most recently terminated past chat contact of the specified past ended chat session. To use this type, provide the initialContactId of the past ended chat session in the sourceContactId field. In this type, Amazon Connect determines the most recent chat contact on the specified chat session that has ended, and uses it to start a persistent chat. FROM_SEGMENT: Rehydrates a chat from the past chat contact that is specified in the sourceContactId field. The actual contactId used for rehydration is provided in the response of this API. SourceContactId (string) --- The contactId from which a persistent chat session must be started.",
      "nested_params": [
        {
          "name": "RehydrationType",
          "type": "string",
          "required": false,
          "description": "The contactId that is used for rehydration depends on the rehydration type. RehydrationType is required for persistent chat.",
          "nested_params": []
        },
        {
          "name": "SourceContactId",
          "type": "string",
          "required": false,
          "description": "The contactId from which a persistent chat session must be started.",
          "nested_params": []
        }
      ]
    },
    {
      "name": "RelatedContactId",
      "type": "string",
      "required": false,
      "description": "The unique identifier for an Amazon Connect contact. This identifier is related to the chat starting.",
      "nested_params": []
    },
    {
      "name": "SegmentAttributes",
      "type": "dict",
      "required": false,
      "description": "A set of system defined key-value pairs stored on individual contact segments using an attribute map. The attributes are standard Amazon Connect attributes. They can be accessed in flows. Attribute keys can include only alphanumeric, -, and _. This field can be used to show channel subtype, such as connect:Guide. (string) --- (dict) --- A value for a segment attribute. This is structured as a map where the key is valueString and the value is a string. ValueString (string) --- The value of a segment attribute. ValueMap (dict) --- The value of a segment attribute. ValueInteger (integer) --- The value of a segment attribute.",
      "nested_params": [
        {
          "name": "ValueString",
          "type": "string",
          "required": false,
          "description": "The value of a segment attribute.",
          "nested_params": []
        },
        {
          "name": "ValueMap",
          "type": "dict",
          "required": false,
          "description": "The value of a segment attribute.",
          "nested_params": []
        },
        {
          "name": "ValueInteger",
          "type": "integer",
          "required": false,
          "description": "The value of a segment attribute.",
          "nested_params": []
        }
      ]
    },
    {
      "name": "CustomerId",
      "type": "string",
      "required": false,
      "description": "",
      "nested_params": []
    }
  ],
  "return_structure": [
    {
      "name": "",
      "type": "dict",
      "description": "",
      "nested_items": [
        {
          "name": "ContactId",
          "type": "string",
          "description": "The identifier of this contact within the Amazon Connect instance.",
          "nested_items": []
        },
        {
          "name": "ParticipantId",
          "type": "string",
          "description": "The identifier for a chat participant. The participantId for a chat participant is the same throughout the chat lifecycle.",
          "nested_items": []
        },
        {
          "name": "ParticipantToken",
          "type": "string",
          "description": "The token used by the chat participant to call CreateParticipantConnection. The participant token is valid for the lifetime of a chat participant.",
          "nested_items": []
        },
        {
          "name": "ContinuedFromContactId",
          "type": "string",
          "description": "The contactId from which a persistent chat session is started. This field is populated only for persistent chats.",
          "nested_items": []
        }
      ]
    }
  ]
}