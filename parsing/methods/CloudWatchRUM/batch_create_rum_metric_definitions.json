{
  "method_name": "batch_create_rum_metric_definitions",
  "url": "https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/rum/client/batch_create_rum_metric_definitions.html",
  "description": "Specifies the extended metrics and custom metrics that you want a CloudWatch RUM app monitor to send to a destination. Valid destinations include CloudWatch and Evidently. By default, RUM app monitors send some metrics to CloudWatch. These default metrics are listed in CloudWatch metrics that you can collect with CloudWatch RUM. In addition to these default metrics, you can choose to send extended metrics, custom metrics, or both. The maximum number of metric definitions that you can specify in one BatchCreateRumMetricDefinitions operation is 200. The maximum number of metric definitions that one destination can contain is 2000. Extended metrics sent to CloudWatch and RUM custom metrics are charged as CloudWatch custom metrics. Each combination of additional dimension name and dimension value counts as a custom metric. For more information, see Amazon CloudWatch Pricing. You must have already created a destination for the metrics before you send them. For more information, see PutRumMetricsDestination. If some metric definitions specified in a BatchCreateRumMetricDefinitions operations are not valid, those metric definitions fail and return errors, but all valid metric definitions in the same operation still succeed.",
  "parameters": [
    {
      "name": "AppMonitorName",
      "type": "string",
      "required": true,
      "description": "The name of the CloudWatch RUM app monitor that is to send the metrics.",
      "nested_params": []
    },
    {
      "name": "Destination",
      "type": "string",
      "required": true,
      "description": "The destination to send the metrics to. Valid values are CloudWatch and Evidently. If you specify Evidently, you must also specify the Amazon Resource Name (ARN) of the CloudWatchEvidently experiment that will receive the metrics and an IAM role that has permission to write to the experiment.",
      "nested_params": []
    },
    {
      "name": "DestinationArn",
      "type": "string",
      "required": false,
      "description": "This parameter is required if Destination is Evidently. If Destination is CloudWatch, do not use this parameter. This parameter specifies the ARN of the Evidently experiment that is to receive the metrics. You must have already defined this experiment as a valid destination. For more information, see PutRumMetricsDestination.",
      "nested_params": []
    },
    {
      "name": "MetricDefinitions",
      "type": "list",
      "required": true,
      "description": "An array of structures which define the metrics that you want to send. (dict) --- Use this structure to define one extended metric or custom metric that RUM will send to CloudWatch or CloudWatch Evidently. For more information, see Custom metrics and extended metrics that you can send to CloudWatch and CloudWatch Evidently. This structure is validated differently for extended metrics and custom metrics. For extended metrics that are sent to the AWS/RUM namespace, the following validations apply: The Namespace parameter must be omitted or set to AWS/RUM. Only certain combinations of values for Name, ValueKey, and EventPattern are valid. In addition to what is displayed in the following list, the EventPattern can also include information used by the DimensionKeys field. If Name is PerformanceNavigationDuration, then ValueKey``must be ``event_details.duration and the EventPattern must include {\"event_type\":[\"com.amazon.rum.performance_navigation_event\"]} If Name is PerformanceResourceDuration, then ValueKey``must be ``event_details.duration and the EventPattern must include {\"event_type\":[\"com.amazon.rum.performance_resource_event\"]} If Name is NavigationSatisfiedTransaction, then ValueKey``must be null and the ``EventPattern must include { \"event_type\": [\"com.amazon.rum.performance_navigation_event\"], \"event_details\": { \"duration\": [{ \"numeric\": [\">\",2000] }] } } If Name is NavigationToleratedTransaction, then ValueKey``must be null and the ``EventPattern must include { \"event_type\": [\"com.amazon.rum.performance_navigation_event\"], \"event_details\": { \"duration\": [{ \"numeric\": [\">=\",2000,\"<\"8000] }] } } If Name is NavigationFrustratedTransaction, then ValueKey``must be null and the ``EventPattern must include { \"event_type\": [\"com.amazon.rum.performance_navigation_event\"], \"event_details\": { \"duration\": [{ \"numeric\": [\">=\",8000] }] } } If Name is WebVitalsCumulativeLayoutShift, then ValueKey``must be ``event_details.value and the EventPattern must include {\"event_type\":[\"com.amazon.rum.cumulative_layout_shift_event\"]} If Name is WebVitalsFirstInputDelay, then ValueKey``must be ``event_details.value and the EventPattern must include {\"event_type\":[\"com.amazon.rum.first_input_delay_event\"]} If Name is WebVitalsLargestContentfulPaint, then ValueKey``must be ``event_details.value and the EventPattern must include {\"event_type\":[\"com.amazon.rum.largest_contentful_paint_event\"]} If Name is JsErrorCount, then ValueKey``must be null and the ``EventPattern must include {\"event_type\":[\"com.amazon.rum.js_error_event\"]} If Name is HttpErrorCount, then ValueKey``must be null and the ``EventPattern must include {\"event_type\":[\"com.amazon.rum.http_event\"]} If Name is SessionCount, then ValueKey``must be null and the ``EventPattern must include {\"event_type\":[\"com.amazon.rum.session_start_event\"]} If Name is PageViewCount, then ValueKey``must be null and the ``EventPattern must include {\"event_type\":[\"com.amazon.rum.page_view_event\"]} If Name is Http4xxCount, then ValueKey``must be null and the ``EventPattern must include {\"event_type\": [\"com.amazon.rum.http_event\"],\"event_details\":{\"response\":{\"status\":[{\"numeric\":[\">=\",400,\"<\",500]}]}}} } If Name is Http5xxCount, then ValueKey``must be null and the ``EventPattern must include {\"event_type\": [\"com.amazon.rum.http_event\"],\"event_details\":{\"response\":{\"status\":[{\"numeric\":[\">=\",500,\"<=\",599]}]}}} } For custom metrics, the following validation rules apply: The namespace can't be omitted and can't be AWS/RUM. You can use the AWS/RUM namespace only for extended metrics. All dimensions listed in the DimensionKeys field must be present in the value of EventPattern. The values that you specify for ValueKey, EventPattern, and DimensionKeys must be fields in RUM events, so all first-level keys in these fields must be one of the keys in the list later in this section. If you set a value for EventPattern, it must be a JSON object. For every non-empty event_details, there must be a non-empty event_type. If EventPattern contains an event_details field, it must also contain an event_type. For every built-in event_type that you use, you must use a value for event_details that corresponds to that event_type. For information about event details that correspond to event types, see RUM event details. In EventPattern, any JSON array must contain only one value. Valid key values for first-level keys in the ValueKey, EventPattern, and DimensionKeys fields: account_id application_Id application_version application_name batch_id event_details event_id event_interaction event_timestamp event_type event_version log_stream metadata sessionId user_details userId DimensionKeys (dict) --- Use this field only if you are sending the metric to CloudWatch. This field is a map of field paths to dimension names. It defines the dimensions to associate with this metric in CloudWatch. For extended metrics, valid values for the entries in this field are the following: \"metadata.pageId\": \"PageId\" \"metadata.browserName\": \"BrowserName\" \"metadata.deviceType\": \"DeviceType\" \"metadata.osName\": \"OSName\" \"metadata.countryCode\": \"CountryCode\" \"event_details.fileType\": \"FileType\" For both extended metrics and custom metrics, all dimensions listed in this field must also be included in EventPattern. (string) --- (string) --- EventPattern (string) --- The pattern that defines the metric, specified as a JSON object. RUM checks events that happen in a user's session against the pattern, and events that match the pattern are sent to the metric destination. When you define extended metrics, the metric definition is not valid if EventPattern is omitted. Example event patterns: '{ \"event_type\": [\"com.amazon.rum.js_error_event\"], \"metadata\": { \"browserName\": [ \"Chrome\", \"Safari\" ], } }' '{ \"event_type\": [\"com.amazon.rum.performance_navigation_event\"], \"metadata\": { \"browserName\": [ \"Chrome\", \"Firefox\" ] }, \"event_details\": { \"duration\": [{ \"numeric\": [ \"<\", 2000 ] }] } }' '{ \"event_type\": [\"com.amazon.rum.performance_navigation_event\"], \"metadata\": { \"browserName\": [ \"Chrome\", \"Safari\" ], \"countryCode\": [ \"US\" ] }, \"event_details\": { \"duration\": [{ \"numeric\": [ \">=\", 2000, \"<\", 8000 ] }] } }' If the metrics destination is CloudWatch and the event also matches a value in DimensionKeys, then the metric is published with the specified dimensions. The name for the metric that is defined in this structure. For custom metrics, you can specify any name that you like. For extended metrics, valid values are the following: PerformanceNavigationDuration PerformanceResourceDuration NavigationSatisfiedTransaction NavigationToleratedTransaction NavigationFrustratedTransaction WebVitalsCumulativeLayoutShift WebVitalsFirstInputDelay WebVitalsLargestContentfulPaint JsErrorCount HttpErrorCount SessionCount Namespace (string) --- If this structure is for a custom metric instead of an extended metrics, use this parameter to define the metric namespace for that custom metric. Do not specify this parameter if this structure is for an extended metric. You cannot use any string that starts with AWS/ for your namespace. UnitLabel (string) --- The CloudWatch metric unit to use for this metric. If you omit this field, the metric is recorded with no unit. ValueKey (string) --- The field within the event object that the metric value is sourced from. If you omit this field, a hardcoded value of 1 is pushed as the metric value. This is useful if you want to count the number of events that the filter catches. If this metric is sent to CloudWatch Evidently, this field will be passed to Evidently raw. Evidently will handle data extraction from the event.",
      "nested_params": []
    }
  ],
  "return_structure": [
    {
      "name": "",
      "type": "dict",
      "description": "",
      "nested_items": [
        {
          "name": "Errors",
          "type": "list",
          "description": "An array of error objects, if the operation caused any errors.",
          "nested_items": [
            {
              "name": "",
              "type": "dict",
              "description": "",
              "nested_items": [
                {
                  "name": "ErrorCode",
                  "type": "string",
                  "description": "The error code.",
                  "nested_items": []
                },
                {
                  "name": "ErrorMessage",
                  "type": "string",
                  "description": "The error message for this metric definition.",
                  "nested_items": []
                },
                {
                  "name": "MetricDefinition",
                  "type": "dict",
                  "description": "The metric definition that caused this error.",
                  "nested_items": [
                    {
                      "name": "DimensionKeys",
                      "type": "dict",
                      "description": "Use this field only if you are sending the metric to CloudWatch.",
                      "nested_items": [
                        {
                          "name": "",
                          "type": "",
                          "description": "\"metadata.pageId\": \"PageId\"",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "\"metadata.browserName\": \"BrowserName\"",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "\"metadata.deviceType\": \"DeviceType\"",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "\"metadata.osName\": \"OSName\"",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "\"metadata.countryCode\": \"CountryCode\"",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "\"event_details.fileType\": \"FileType\"",
                          "nested_items": []
                        }
                      ]
                    },
                    {
                      "name": "EventPattern",
                      "type": "string",
                      "description": "The pattern that defines the metric, specified as a JSON object. RUM checks events that happen in a user's session against the pattern, and events that match the pattern are sent to the metric destination.",
                      "nested_items": [
                        {
                          "name": "",
                          "type": "",
                          "description": "'{ \"event_type\": [\"com.amazon.rum.js_error_event\"], \"metadata\": { \"browserName\": [ \"Chrome\", \"Safari\" ], } }'",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "'{ \"event_type\": [\"com.amazon.rum.performance_navigation_event\"], \"metadata\": { \"browserName\": [ \"Chrome\", \"Firefox\" ] }, \"event_details\": { \"duration\": [{ \"numeric\": [ \"<\", 2000 ] }] } }'",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "'{ \"event_type\": [\"com.amazon.rum.performance_navigation_event\"], \"metadata\": { \"browserName\": [ \"Chrome\", \"Safari\" ], \"countryCode\": [ \"US\" ] }, \"event_details\": { \"duration\": [{ \"numeric\": [ \">=\", 2000, \"<\", 8000 ] }] } }'",
                          "nested_items": []
                        }
                      ]
                    },
                    {
                      "name": "Name",
                      "type": "string",
                      "description": "The name for the metric that is defined in this structure. For custom metrics, you can specify any name that you like. For extended metrics, valid values are the following:",
                      "nested_items": [
                        {
                          "name": "",
                          "type": "",
                          "description": "PerformanceNavigationDuration.",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "PerformanceResourceDuration.",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "NavigationSatisfiedTransaction.",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "NavigationToleratedTransaction.",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "NavigationFrustratedTransaction.",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "WebVitalsCumulativeLayoutShift.",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "WebVitalsFirstInputDelay.",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "WebVitalsLargestContentfulPaint.",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "JsErrorCount.",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "HttpErrorCount.",
                          "nested_items": []
                        },
                        {
                          "name": "",
                          "type": "",
                          "description": "SessionCount.",
                          "nested_items": []
                        }
                      ]
                    },
                    {
                      "name": "Namespace",
                      "type": "string",
                      "description": "If this structure is for a custom metric instead of an extended metrics, use this parameter to define the metric namespace for that custom metric. Do not specify this parameter if this structure is for an extended metric.",
                      "nested_items": []
                    },
                    {
                      "name": "UnitLabel",
                      "type": "string",
                      "description": "The CloudWatch metric unit to use for this metric. If you omit this field, the metric is recorded with no unit.",
                      "nested_items": []
                    },
                    {
                      "name": "ValueKey",
                      "type": "string",
                      "description": "The field within the event object that the metric value is sourced from.",
                      "nested_items": []
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "MetricDefinitions",
          "type": "list",
          "description": "An array of structures that define the extended metrics.",
          "nested_items": [
            {
              "name": "",
              "type": "dict",
              "description": "",
              "nested_items": [
                {
                  "name": "DimensionKeys",
                  "type": "dict",
                  "description": "This field is a map of field paths to dimension names. It defines the dimensions to associate with this metric in CloudWatch The value of this field is used only if the metric destination is CloudWatch. If the metric destination is Evidently, the value of DimensionKeys is ignored.",
                  "nested_items": [
                    {
                      "name": "",
                      "type": "string",
                      "description": "(string) ---",
                      "nested_items": [
                        {
                          "name": "",
                          "type": "string",
                          "description": "(string) ---",
                          "nested_items": []
                        }
                      ]
                    }
                  ]
                },
                {
                  "name": "EventPattern",
                  "type": "string",
                  "description": "The pattern that defines the metric. RUM checks events that happen in a user's session against the pattern, and events that match the pattern are sent to the metric destination.",
                  "nested_items": []
                },
                {
                  "name": "MetricDefinitionId",
                  "type": "string",
                  "description": "The ID of this metric definition.",
                  "nested_items": []
                },
                {
                  "name": "Name",
                  "type": "string",
                  "description": "The name of the metric that is defined in this structure.",
                  "nested_items": []
                },
                {
                  "name": "Namespace",
                  "type": "string",
                  "description": "If this metric definition is for a custom metric instead of an extended metric, this field displays the metric namespace that the custom metric is published to.",
                  "nested_items": []
                },
                {
                  "name": "UnitLabel",
                  "type": "string",
                  "description": "Use this field only if you are sending this metric to CloudWatch. It defines the CloudWatch metric unit that this metric is measured in.",
                  "nested_items": []
                },
                {
                  "name": "ValueKey",
                  "type": "string",
                  "description": "The field within the event object that the metric value is sourced from.",
                  "nested_items": []
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}