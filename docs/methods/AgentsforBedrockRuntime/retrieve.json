{
  "method_name": "retrieve",
  "url": "https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/bedrock-agent-runtime/client/retrieve.html",
  "description": "Queries a knowledge base and retrieves information from it.",
  "parameters": [
    {
      "name": "guardrailConfiguration",
      "type": "dict",
      "required": true,
      "description": "Guardrail settings. The unique identifier for the guardrail. The version of the guardrail.",
      "nested_params": [
        {
          "name": "guardrailId",
          "type": "string",
          "required": false,
          "description": "The unique identifier for the guardrail.",
          "nested_params": []
        },
        {
          "name": "guardrailVersion",
          "type": "string",
          "required": false,
          "description": "The version of the guardrail.",
          "nested_params": []
        }
      ]
    },
    {
      "name": "knowledgeBaseId",
      "type": "string",
      "required": true,
      "description": "The unique identifier of the knowledge base to query.",
      "nested_params": []
    },
    {
      "name": "nextToken",
      "type": "string",
      "required": false,
      "description": "",
      "nested_params": []
    },
    {
      "name": "retrievalConfiguration",
      "type": "dict",
      "required": true,
      "description": "Contains configurations for the knowledge base query and retrieval process. For more information, see Query configurations. Contains details about how the results from the vector search should be returned. filter (dict) --- Specifies the filters to use on the metadata in the knowledge base data sources before returning results. andAll (list) --- Knowledge base data sources are returned if their metadata attributes fulfill all the filter conditions inside this list. (dict) --- Specifies the filters to use on the metadata attributes in the knowledge base data sources before returning results. See the examples below to see how to use these filters. This data type is used in the following API operations: Retrieve request --- in the filter field RetrieveAndGenerate request --- in the filter field equals (dict) --- Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value matches the value in this object. The following example would return data sources with an animal attribute whose value is cat: \"equals\": { \"key\": \"animal\", \"value\": \"cat\" } The name that the metadata attribute must match. The value to whcih to compare the value of the metadata attribute. greaterThan (dict) --- Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value is greater than the value in this object. The following example would return data sources with an year attribute whose value is greater than 1989: \"greaterThan\": { \"key\": \"year\", \"value\": 1989 } The name that the metadata attribute must match. greaterThanOrEquals (dict) --- Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value is greater than or equal to the value in this object. The following example would return data sources with an year attribute whose value is greater than or equal to 1989: \"greaterThanOrEquals\": { \"key\": \"year\", \"value\": 1989 } The name that the metadata attribute must match. in (dict) --- Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value is in the list specified in the value in this object. The following example would return data sources with an animal attribute that is either cat or dog: \"in\": { \"key\": \"animal\", \"value\": [\"cat\", \"dog\"] } The name that the metadata attribute must match. lessThan (dict) --- Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value is less than the value in this object. The following example would return data sources with an year attribute whose value is less than to 1989. \"lessThan\": { \"key\": \"year\", \"value\": 1989 } The name that the metadata attribute must match. lessThanOrEquals (dict) --- Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value is less than or equal to the value in this object. The following example would return data sources with an year attribute whose value is less than or equal to 1989. \"lessThanOrEquals\": { \"key\": \"year\", \"value\": 1989 } The name that the metadata attribute must match. listContains (dict) --- Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value is a list that contains the value as one of its members. The following example would return data sources with an animals attribute that is a list containing a cat member (for example [\"dog\", \"cat\"]). \"listContains\": { \"key\": \"animals\", \"value\": \"cat\" } The name that the metadata attribute must match. notEquals (dict) --- Knowledge base data sources are returned when: It contains a metadata attribute whose name matches the key and whose value doesn't match the value in this object. The key is not present in the document. The following example would return data sources that don't contain an animal attribute whose value is cat. \"notEquals\": { \"key\": \"animal\", \"value\": \"cat\" } The name that the metadata attribute must match. notIn (dict) --- Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value isn't in the list specified in the value in this object. The following example would return data sources whose animal attribute is neither cat nor dog. \"notIn\": { \"key\": \"animal\", \"value\": [\"cat\", \"dog\"] } The name that the metadata attribute must match. orAll (list) --- Knowledge base data sources are returned if their metadata attributes fulfill at least one of the filter conditions inside this list. This data type is used in the following API operations: Retrieve request --- in the filter field RetrieveAndGenerate request --- in the filter field startsWith (dict) --- Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value starts with the value in this object. This filter is currently only supported for Amazon OpenSearch Serverless vector stores. The following example would return data sources with an animal attribute starts with ca (for example, cat or camel). \"startsWith\": { \"key\": \"animal\", \"value\": \"ca\" } The name that the metadata attribute must match. stringContains (dict) --- Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value is one of the following: A string that contains the value as a substring. The following example would return data sources with an animal attribute that contains the substring at (for example cat). \"stringContains\": { \"key\": \"animal\", \"value\": \"at\" } A list with a member that contains the value as a substring. The following example would return data sources with an animals attribute that is a list containing a member that contains the substring at (for example [\"dog\", \"cat\"]). \"stringContains\": { \"key\": \"animals\", \"value\": \"at\" } The name that the metadata attribute must match. implicitFilterConfiguration (dict) --- Settings for implicit filtering. Metadata that can be used in a filter. (dict) --- Details about a metadata attribute. The attribute's description. The attribute's key. The attribute's type. The model that generates the filter. numberOfResults (integer) --- The number of source chunks to retrieve. overrideSearchType (string) --- By default, Amazon Bedrock decides a search strategy for you. If you're using an Amazon OpenSearch Serverless vector store that contains a filterable text field, you can specify whether to query the knowledge base with a HYBRID search using both vector embeddings and raw text, or SEMANTIC search using only vector embeddings. For other vector store configurations, only SEMANTIC search is available. For more information, see Test a knowledge base. rerankingConfiguration (dict) --- Contains configurations for reranking the retrieved results. For more information, see Improve the relevance of query responses with a reranker model. bedrockRerankingConfiguration (dict) --- Contains configurations for an Amazon Bedrock reranker model. metadataConfiguration (dict) --- Contains configurations for the metadata to use in reranking. Specifies whether to consider all metadata when reranking, or only the metadata that you select. If you specify SELECTIVE, include the selectiveModeConfiguration field. selectiveModeConfiguration (dict) --- Contains configurations for the metadata fields to include or exclude when considering reranking. fieldsToExclude (list) --- An array of objects, each of which specifies a metadata field to exclude from consideration when reranking. (dict) --- Contains information for a metadata field to include in or exclude from consideration when reranking. The name of a metadata field to include in or exclude from consideration when reranking. fieldsToInclude (list) --- An array of objects, each of which specifies a metadata field to include in consideration when reranking. The remaining metadata fields are ignored. Contains configurations for the reranker model. additionalModelRequestFields (dict) --- A JSON object whose keys are request fields for the model and whose values are values for those fields. (string) --- (document) --- The ARN of the reranker model to use. numberOfRerankedResults (integer) --- The number of results to return after reranking. The type of reranker model.",
      "nested_params": [
        {
          "name": "vectorSearchConfiguration",
          "type": "dict",
          "required": false,
          "description": "Contains details about how the results from the vector search should be returned. For more information, see Query configurations.",
          "nested_params": [
            {
              "name": "filter",
              "type": "dict",
              "required": false,
              "description": "Specifies the filters to use on the metadata in the knowledge base data sources before returning results. For more information, see Query configurations.",
              "nested_params": [
                {
                  "name": "andAll",
                  "type": "list",
                  "required": false,
                  "description": "Knowledge base data sources are returned if their metadata attributes fulfill all the filter conditions inside this list.",
                  "nested_params": []
                },
                {
                  "name": "equals",
                  "type": "dict",
                  "required": false,
                  "description": "Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value matches the value in this object. The following example would return data sources with an animal attribute whose value is cat: \"equals\": { \"key\": \"animal\", \"value\": \"cat\" }",
                  "nested_params": [
                    {
                      "name": "key",
                      "type": "string",
                      "required": false,
                      "description": "The name that the metadata attribute must match.",
                      "nested_params": []
                    },
                    {
                      "name": "value",
                      "type": "document",
                      "required": true,
                      "description": "The value to whcih to compare the value of the metadata attribute.",
                      "nested_params": []
                    }
                  ]
                },
                {
                  "name": "greaterThan",
                  "type": "dict",
                  "required": false,
                  "description": "Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value is greater than the value in this object. The following example would return data sources with an year attribute whose value is greater than 1989: \"greaterThan\": { \"key\": \"year\", \"value\": 1989 }",
                  "nested_params": [
                    {
                      "name": "key",
                      "type": "string",
                      "required": false,
                      "description": "The name that the metadata attribute must match.",
                      "nested_params": []
                    },
                    {
                      "name": "value",
                      "type": "document",
                      "required": true,
                      "description": "The value to whcih to compare the value of the metadata attribute.",
                      "nested_params": []
                    }
                  ]
                },
                {
                  "name": "greaterThanOrEquals",
                  "type": "dict",
                  "required": false,
                  "description": "Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value is greater than or equal to the value in this object. The following example would return data sources with an year attribute whose value is greater than or equal to 1989: \"greaterThanOrEquals\": { \"key\": \"year\", \"value\": 1989 }",
                  "nested_params": [
                    {
                      "name": "key",
                      "type": "string",
                      "required": false,
                      "description": "The name that the metadata attribute must match.",
                      "nested_params": []
                    },
                    {
                      "name": "value",
                      "type": "document",
                      "required": true,
                      "description": "The value to whcih to compare the value of the metadata attribute.",
                      "nested_params": []
                    }
                  ]
                },
                {
                  "name": "in",
                  "type": "dict",
                  "required": false,
                  "description": "Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value is in the list specified in the value in this object. The following example would return data sources with an animal attribute that is either cat or dog: \"in\": { \"key\": \"animal\", \"value\": [\"cat\", \"dog\"] }",
                  "nested_params": [
                    {
                      "name": "key",
                      "type": "string",
                      "required": false,
                      "description": "The name that the metadata attribute must match.",
                      "nested_params": []
                    },
                    {
                      "name": "value",
                      "type": "document",
                      "required": true,
                      "description": "The value to whcih to compare the value of the metadata attribute.",
                      "nested_params": []
                    }
                  ]
                },
                {
                  "name": "lessThan",
                  "type": "dict",
                  "required": false,
                  "description": "Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value is less than the value in this object. The following example would return data sources with an year attribute whose value is less than to 1989. \"lessThan\": { \"key\": \"year\", \"value\": 1989 }",
                  "nested_params": [
                    {
                      "name": "key",
                      "type": "string",
                      "required": false,
                      "description": "The name that the metadata attribute must match.",
                      "nested_params": []
                    },
                    {
                      "name": "value",
                      "type": "document",
                      "required": true,
                      "description": "The value to whcih to compare the value of the metadata attribute.",
                      "nested_params": []
                    }
                  ]
                },
                {
                  "name": "lessThanOrEquals",
                  "type": "dict",
                  "required": false,
                  "description": "Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value is less than or equal to the value in this object. The following example would return data sources with an year attribute whose value is less than or equal to 1989. \"lessThanOrEquals\": { \"key\": \"year\", \"value\": 1989 }",
                  "nested_params": [
                    {
                      "name": "key",
                      "type": "string",
                      "required": false,
                      "description": "The name that the metadata attribute must match.",
                      "nested_params": []
                    },
                    {
                      "name": "value",
                      "type": "document",
                      "required": true,
                      "description": "The value to whcih to compare the value of the metadata attribute.",
                      "nested_params": []
                    }
                  ]
                },
                {
                  "name": "listContains",
                  "type": "dict",
                  "required": false,
                  "description": "Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value is a list that contains the value as one of its members. The following example would return data sources with an animals attribute that is a list containing a cat member (for example [\"dog\", \"cat\"]). \"listContains\": { \"key\": \"animals\", \"value\": \"cat\" }",
                  "nested_params": [
                    {
                      "name": "key",
                      "type": "string",
                      "required": false,
                      "description": "The name that the metadata attribute must match.",
                      "nested_params": []
                    },
                    {
                      "name": "value",
                      "type": "document",
                      "required": true,
                      "description": "The value to whcih to compare the value of the metadata attribute.",
                      "nested_params": []
                    }
                  ]
                },
                {
                  "name": "notEquals",
                  "type": "dict",
                  "required": false,
                  "description": "Knowledge base data sources are returned when:",
                  "nested_params": []
                },
                {
                  "name": "notIn",
                  "type": "dict",
                  "required": false,
                  "description": "Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value isn't in the list specified in the value in this object. The following example would return data sources whose animal attribute is neither cat nor dog. \"notIn\": { \"key\": \"animal\", \"value\": [\"cat\", \"dog\"] }",
                  "nested_params": [
                    {
                      "name": "key",
                      "type": "string",
                      "required": false,
                      "description": "The name that the metadata attribute must match.",
                      "nested_params": []
                    },
                    {
                      "name": "value",
                      "type": "document",
                      "required": true,
                      "description": "The value to whcih to compare the value of the metadata attribute.",
                      "nested_params": []
                    }
                  ]
                },
                {
                  "name": "orAll",
                  "type": "list",
                  "required": false,
                  "description": "Knowledge base data sources are returned if their metadata attributes fulfill at least one of the filter conditions inside this list.",
                  "nested_params": []
                },
                {
                  "name": "startsWith",
                  "type": "dict",
                  "required": false,
                  "description": "Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value starts with the value in this object. This filter is currently only supported for Amazon OpenSearch Serverless vector stores. The following example would return data sources with an animal attribute starts with ca (for example, cat or camel). \"startsWith\": { \"key\": \"animal\", \"value\": \"ca\" }",
                  "nested_params": [
                    {
                      "name": "key",
                      "type": "string",
                      "required": false,
                      "description": "The name that the metadata attribute must match.",
                      "nested_params": []
                    },
                    {
                      "name": "value",
                      "type": "document",
                      "required": true,
                      "description": "The value to whcih to compare the value of the metadata attribute.",
                      "nested_params": []
                    }
                  ]
                },
                {
                  "name": "stringContains",
                  "type": "dict",
                  "required": false,
                  "description": "Knowledge base data sources are returned if they contain a metadata attribute whose name matches the key and whose value is one of the following:",
                  "nested_params": []
                }
              ]
            },
            {
              "name": "implicitFilterConfiguration",
              "type": "dict",
              "required": false,
              "description": "Settings for implicit filtering.",
              "nested_params": [
                {
                  "name": "metadataAttributes",
                  "type": "list",
                  "required": false,
                  "description": "Metadata that can be used in a filter.",
                  "nested_params": [
                    {
                      "name": "description",
                      "type": "string",
                      "required": false,
                      "description": "The attribute's description.",
                      "nested_params": []
                    },
                    {
                      "name": "key",
                      "type": "string",
                      "required": false,
                      "description": "The attribute's key.",
                      "nested_params": []
                    },
                    {
                      "name": "type",
                      "type": "string",
                      "required": false,
                      "description": "The attribute's type.",
                      "nested_params": []
                    }
                  ]
                },
                {
                  "name": "modelArn",
                  "type": "string",
                  "required": false,
                  "description": "The model that generates the filter.",
                  "nested_params": []
                }
              ]
            },
            {
              "name": "numberOfResults",
              "type": "integer",
              "required": false,
              "description": "The number of source chunks to retrieve.",
              "nested_params": []
            },
            {
              "name": "overrideSearchType",
              "type": "string",
              "required": false,
              "description": "By default, Amazon Bedrock decides a search strategy for you. If you're using an Amazon OpenSearch Serverless vector store that contains a filterable text field, you can specify whether to query the knowledge base with a HYBRID search using both vector embeddings and raw text, or SEMANTIC search using only vector embeddings. For other vector store configurations, only SEMANTIC search is available. For more information, see Test a knowledge base.",
              "nested_params": []
            },
            {
              "name": "rerankingConfiguration",
              "type": "dict",
              "required": false,
              "description": "Contains configurations for reranking the retrieved results. For more information, see Improve the relevance of query responses with a reranker model.",
              "nested_params": [
                {
                  "name": "bedrockRerankingConfiguration",
                  "type": "dict",
                  "required": false,
                  "description": "Contains configurations for an Amazon Bedrock reranker model.",
                  "nested_params": [
                    {
                      "name": "metadataConfiguration",
                      "type": "dict",
                      "required": false,
                      "description": "Contains configurations for the metadata to use in reranking.",
                      "nested_params": [
                        {
                          "name": "selectionMode",
                          "type": "string",
                          "required": false,
                          "description": "Specifies whether to consider all metadata when reranking, or only the metadata that you select. If you specify SELECTIVE, include the selectiveModeConfiguration field.",
                          "nested_params": []
                        },
                        {
                          "name": "selectiveModeConfiguration",
                          "type": "dict",
                          "required": false,
                          "description": "Contains configurations for the metadata fields to include or exclude when considering reranking.",
                          "nested_params": [
                            {
                              "name": "fieldsToExclude",
                              "type": "list",
                              "required": false,
                              "description": "An array of objects, each of which specifies a metadata field to exclude from consideration when reranking.",
                              "nested_params": [
                                {
                                  "name": "fieldName",
                                  "type": "string",
                                  "required": false,
                                  "description": "The name of a metadata field to include in or exclude from consideration when reranking.",
                                  "nested_params": []
                                }
                              ]
                            },
                            {
                              "name": "fieldsToInclude",
                              "type": "list",
                              "required": false,
                              "description": "An array of objects, each of which specifies a metadata field to include in consideration when reranking. The remaining metadata fields are ignored.",
                              "nested_params": [
                                {
                                  "name": "fieldName",
                                  "type": "string",
                                  "required": false,
                                  "description": "The name of a metadata field to include in or exclude from consideration when reranking.",
                                  "nested_params": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "name": "modelConfiguration",
                      "type": "dict",
                      "required": false,
                      "description": "Contains configurations for the reranker model.",
                      "nested_params": [
                        {
                          "name": "additionalModelRequestFields",
                          "type": "dict",
                          "required": false,
                          "description": "A JSON object whose keys are request fields for the model and whose values are values for those fields.",
                          "nested_params": []
                        },
                        {
                          "name": "modelArn",
                          "type": "string",
                          "required": false,
                          "description": "The ARN of the reranker model to use.",
                          "nested_params": []
                        }
                      ]
                    },
                    {
                      "name": "numberOfRerankedResults",
                      "type": "integer",
                      "required": false,
                      "description": "The number of results to return after reranking.",
                      "nested_params": []
                    }
                  ]
                },
                {
                  "name": "type",
                  "type": "string",
                  "required": false,
                  "description": "The type of reranker model.",
                  "nested_params": []
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "retrievalQuery",
      "type": "dict",
      "required": true,
      "description": "Contains the query to send the knowledge base. The text of the query made to the knowledge base.",
      "nested_params": [
        {
          "name": "text",
          "type": "string",
          "required": false,
          "description": "The text of the query made to the knowledge base.",
          "nested_params": []
        }
      ]
    }
  ],
  "return_structure": [
    {
      "name": "",
      "type": "dict",
      "description": "",
      "nested_items": [
        {
          "name": "guardrailAction",
          "type": "string",
          "description": "Specifies if there is a guardrail intervention in the response.",
          "nested_items": []
        },
        {
          "name": "nextToken",
          "type": "string",
          "description": "If there are more results than can fit in the response, the response returns a nextToken. Use this token in the nextToken field of another request to retrieve the next batch of results.",
          "nested_items": []
        },
        {
          "name": "retrievalResults",
          "type": "list",
          "description": "A list of results from querying the knowledge base.",
          "nested_items": [
            {
              "name": "",
              "type": "dict",
              "description": "",
              "nested_items": [
                {
                  "name": "",
                  "type": "",
                  "description": "Retrieve response --- in the retrievalResults field.",
                  "nested_items": []
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}